<% content_for :head_title do %>
  Settings
<% end %>
<% content_for :extra_stylesheet do %>
  <link  href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.1.3/cropper.min.css" rel="stylesheet">
  <%= stylesheet_link_tag 'users/edit', media: 'all' %>
<% end %>

<div class="kpter-settings">
  <div class="kpter-settings-menu">
    <a href="<%= edit_user_registration_path %>" class="mdl-navigation__link <% if request.path_info == edit_user_registration_path %>active<% end %>">
      <span class="mdl-list__item-primary-content">
        <i class="material-icons mdl-list__item-icon">person</i>
        Personal Setting
      </span>
    </a>
  </div>
  <div class="kpter-settings-contents">
    <div class="kpter-form-left mdl-cell mdl-grid mdl-grid--no-spacing">
      <%= render partial: "devise/shared/error_messages", locals: {object: resource} %>
      <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
        <div class="mdl-typography--caption mdl-color-text--primary">avator</div>
        <div class="hoverable" id="btn-file-uploader">
        	<%= image_tag(avatar_url(current_user), class: "kpter-avatar-img-96", alt: "#{current_user.nickname}") %>
        	<div class="mask">
        		<div class="caption">Change<br>avatar</div>
        	</div>
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <%= f.text_field :nickname, class: "mdl-textfield__input", maxlength: 32, required: true %>
          <%= f.label :nickname, class: "mdl-textfield__label" %>
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <%= f.email_field :email, class: "mdl-textfield__input", maxlength: 255, required: true %>
          <%= f.label :email, class: "mdl-textfield__label" %>
          <span class="mdl-textfield__error">Invalid email</span>
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <%= f.password_field :password, autocomplete: "off", class: "mdl-textfield__input", maxlength: 128 %>
          <%= f.label :password, class: "mdl-textfield__label" %>
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <%= f.password_field :password_confirmation, autocomplete: "off", class: "mdl-textfield__input", maxlength: 128 %>
          <%= f.label :password_confirmation, class: "mdl-textfield__label" %>
        </div>
        <%= button_tag t('.update', :default => "Update"), class: 'mdl-button mdl-button--colored mdl-js-button float-right' %>
      <% end %>
    </div>
  </div>
</div>

<%= render partial: "devise/registrations/upload_avatar" %>
<% content_for :extra_js do %>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.1.3/cropper.min.js"></script>
  <%= javascript_include_tag 'fine-uploader/5.15.0/fine-uploader.core' %>
  <%= javascript_include_tag 'users/edit.js' %>
<% end %>
