<%= javascript_include_tag 'communities/invitable_users' %>
<%= javascript_include_tag 'list' %>

<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h4 class="modal-title" id="myModalLabel">Invite others to <%= community.name %></h4>
    </div>
    <%= form_for community, :url => {:action => 'invite'}, :method => :post do |f| %>
      <div id="users" class="modal-body">
        <div class="search-container form-group input-group">
          <span class="input-group-addon icon">
            <i class="fa fa-search" aria-hidden="true"></i>
          </span>
          <input type="text" class="form-control search" placeholder="Username">
        </div>
        <div class="invite-container">
          <table class="invite-table table table-hover">
            <tbody class="list">
              <% if invitable_users.nil? %>
                <tr>
                  <td>No Data Available</td>
                </tr>
              <% else %>
                <% invitable_users.each do |user| %>
                  <tr>
                    <td class="col-xs-1 col-ms-1 col-md-1 col-lg-1 text-center">
                      <%= f.check_box :user_ids, { multiple: true, checked: user[:checked], disabled: user[:disabled], include_hidden: false, class: 'invitable-user-check'}, user[:id] %>
                    </td>
                    <td class="col-xs-1 col-ms-1 col-md-1 col-lg-1 text-center">
                      <%= image_tag(avatar_url(user), :class => "cbImgPict cbThumbPict img-thumbnail img-circle", :alt => "#{user.username}") %>
                    </td>
                    <td class="col-xs-10 col-ms-10 col-md-10 col-lg-10 text-left username"><%= user.username %></td>
                  </tr>
                <% end %>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <%= submit_tag "Invite", class: "btn btn-primary invite-button", disabled: true %>
      </div>
    <% end %>
  </div>
</div>
